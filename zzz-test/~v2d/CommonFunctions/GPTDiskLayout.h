#pragma once

#include "stdafx.h"
#include "CrcCalc.h"
#include "..\ServerFileDevice\ServerFileDevice_i.h"

static CONST INT GPT_LBA_BLOCK_SIZE = (512);

static CONST INT GPT_LBA_BLOCK_COUNT_MBR = (1);
static CONST INT GPT_LBA_BLOCK_COUNT_HEADER = (1);
static CONST INT GPT_LBA_BLOCK_COUNT_PARTITION_ENTRIES = (32);

static CONST INT GPT_PARTITION_TABLE_ENTRY_SIZE = GPT_LBA_BLOCK_SIZE/4;

static CONST BYTE GPT_MBR_SAMPLE[] = 
{
	0x33, 0xC0, 0x8E, 0xD0, 0xBC, 0x00, 0x7C, 0x8E, 0xC0, 0x8E, 0xD8, 0xBE, 0x00, 0x7C, 0xBF, 0x00
	, 0x06, 0xB9, 0x00, 0x02, 0xFC, 0xF3, 0xA4, 0x50, 0x68, 0x1C, 0x06, 0xCB, 0xFB, 0xB9, 0x04, 0x00
	, 0xBD, 0xBE, 0x07, 0x80, 0x7E, 0x00, 0x00, 0x7C, 0x0B, 0x0F, 0x85, 0x0E, 0x01, 0x83, 0xC5, 0x10
	, 0xE2, 0xF1, 0xCD, 0x18, 0x88, 0x56, 0x00, 0x55, 0xC6, 0x46, 0x11, 0x05, 0xC6, 0x46, 0x10, 0x00
	, 0xB4, 0x41, 0xBB, 0xAA, 0x55, 0xCD, 0x13, 0x5D, 0x72, 0x0F, 0x81, 0xFB, 0x55, 0xAA, 0x75, 0x09
	, 0xF7, 0xC1, 0x01, 0x00, 0x74, 0x03, 0xFE, 0x46, 0x10, 0x66, 0x60, 0x80, 0x7E, 0x10, 0x00, 0x74
	, 0x26, 0x66, 0x68, 0x00, 0x00, 0x00, 0x00, 0x66, 0xFF, 0x76, 0x08, 0x68, 0x00, 0x00, 0x68, 0x00
	, 0x7C, 0x68, 0x01, 0x00, 0x68, 0x10, 0x00, 0xB4, 0x42, 0x8A, 0x56, 0x00, 0x8B, 0xF4, 0xCD, 0x13
	, 0x9F, 0x83, 0xC4, 0x10, 0x9E, 0xEB, 0x14, 0xB8, 0x01, 0x02, 0xBB, 0x00, 0x7C, 0x8A, 0x56, 0x00
	, 0x8A, 0x76, 0x01, 0x8A, 0x4E, 0x02, 0x8A, 0x6E, 0x03, 0xCD, 0x13, 0x66, 0x61, 0x73, 0x1C, 0xFE
	, 0x4E, 0x11, 0x75, 0x0C, 0x80, 0x7E, 0x00, 0x80, 0x0F, 0x84, 0x8A, 0x00, 0xB2, 0x80, 0xEB, 0x84
	, 0x55, 0x32, 0xE4, 0x8A, 0x56, 0x00, 0xCD, 0x13, 0x5D, 0xEB, 0x9E, 0x81, 0x3E, 0xFE, 0x7D, 0x55
	, 0xAA, 0x75, 0x6E, 0xFF, 0x76, 0x00, 0xE8, 0x8D, 0x00, 0x75, 0x17, 0xFA, 0xB0, 0xD1, 0xE6, 0x64
	, 0xE8, 0x83, 0x00, 0xB0, 0xDF, 0xE6, 0x60, 0xE8, 0x7C, 0x00, 0xB0, 0xFF, 0xE6, 0x64, 0xE8, 0x75
	, 0x00, 0xFB, 0xB8, 0x00, 0xBB, 0xCD, 0x1A, 0x66, 0x23, 0xC0, 0x75, 0x3B, 0x66, 0x81, 0xFB, 0x54
	, 0x43, 0x50, 0x41, 0x75, 0x32, 0x81, 0xF9, 0x02, 0x01, 0x72, 0x2C, 0x66, 0x68, 0x07, 0xBB, 0x00
	, 0x00, 0x66, 0x68, 0x00, 0x02, 0x00, 0x00, 0x66, 0x68, 0x08, 0x00, 0x00, 0x00, 0x66, 0x53, 0x66
	, 0x53, 0x66, 0x55, 0x66, 0x68, 0x00, 0x00, 0x00, 0x00, 0x66, 0x68, 0x00, 0x7C, 0x00, 0x00, 0x66
	, 0x61, 0x68, 0x00, 0x00, 0x07, 0xCD, 0x1A, 0x5A, 0x32, 0xF6, 0xEA, 0x00, 0x7C, 0x00, 0x00, 0xCD
	, 0x18, 0xA0, 0xB7, 0x07, 0xEB, 0x08, 0xA0, 0xB6, 0x07, 0xEB, 0x03, 0xA0, 0xB5, 0x07, 0x32, 0xE4
	, 0x05, 0x00, 0x07, 0x8B, 0xF0, 0xAC, 0x3C, 0x00, 0x74, 0x09, 0xBB, 0x07, 0x00, 0xB4, 0x0E, 0xCD
	, 0x10, 0xEB, 0xF2, 0xF4, 0xEB, 0xFD, 0x2B, 0xC9, 0xE4, 0x64, 0xEB, 0x00, 0x24, 0x02, 0xE0, 0xF8
	, 0x24, 0x02, 0xC3, 0x49, 0x6E, 0x76, 0x61, 0x6C, 0x69, 0x64, 0x20, 0x70, 0x61, 0x72, 0x74, 0x69
	, 0x74, 0x69, 0x6F, 0x6E, 0x20, 0x74, 0x61, 0x62, 0x6C, 0x65, 0x00, 0x45, 0x72, 0x72, 0x6F, 0x72
	, 0x20, 0x6C, 0x6F, 0x61, 0x64, 0x69, 0x6E, 0x67, 0x20, 0x6F, 0x70, 0x65, 0x72, 0x61, 0x74, 0x69
	, 0x6E, 0x67, 0x20, 0x73, 0x79, 0x73, 0x74, 0x65, 0x6D, 0x00, 0x4D, 0x69, 0x73, 0x73, 0x69, 0x6E
	, 0x67, 0x20, 0x6F, 0x70, 0x65, 0x72, 0x61, 0x74, 0x69, 0x6E, 0x67, 0x20, 0x73, 0x79, 0x73, 0x74
	, 0x65, 0x6D, 0x00, 0x00, 0x00, 0x63, 0x7B, 0x9A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x02, 0x00, 0xEE, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0xAA
};

static CONST BYTE GPT_HEADER_SAMPLE[] = 
{
	0x45, 0x46, 0x49, 0x20, 0x50, 0x41, 0x52, 0x54, 0x00, 0x00, 0x01, 0x00, 0x5C, 0x00, 0x00, 0x00
	, 0xCF, 0x2A, 0x70, 0x9E, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0xFF, 0xFF, 0x31, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0xDE, 0xFF, 0x31, 0x00, 0x00, 0x00, 0x00, 0x00, 0x17, 0x9A, 0x1D, 0x52, 0xE8, 0x1D, 0xB0, 0x42
	, 0xA0, 0x54, 0xA7, 0x40, 0xB7, 0xA1, 0x1B, 0x4C, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x4E, 0x9E, 0x5D, 0x73, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

static CONST BYTE GPT_PARTITION_TABLE_ENTRY_SAMPLE[] = 
{
	0x16, 0xE3, 0xC9, 0xE3, 0x5C, 0x0B, 0xB8, 0x4D, 0x81, 0x7D, 0xF9, 0x2D, 0xF0, 0x02, 0x15, 0xAE
	, 0x22, 0x29, 0xDC, 0x19, 0x7B, 0xFE, 0x4A, 0x4E, 0xA2, 0x2F, 0xF7, 0x9A, 0x81, 0x8C, 0xB6, 0x14
	, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x21, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4D, 0x00, 0x69, 0x00, 0x63, 0x00, 0x72, 0x00
	, 0x6F, 0x00, 0x73, 0x00, 0x6F, 0x00, 0x66, 0x00, 0x74, 0x00, 0x20, 0x00, 0x72, 0x00, 0x65, 0x00
	, 0x73, 0x00, 0x65, 0x00, 0x72, 0x00, 0x76, 0x00, 0x65, 0x00, 0x64, 0x00, 0x20, 0x00, 0x70, 0x00
	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
	, 0x2A, 0x79, 0x5B, 0xEE, 0x28, 0x4C, 0x82, 0x40, 0xAE, 0xC5, 0xE9, 0x48, 0x42, 0x4E, 0xB8, 0x7E
	, 0x80, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x20, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
	, 0xE5, 0xE2, 0x0D, 0x41, 0x7A, 0x88, 0x75, 0x4E, 0x96, 0x1A, 0xFB, 0xD0, 0x21, 0x0F, 0xD3, 0xE6
	, 0x80, 0x20, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x60, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
	, 0x8E, 0xDE, 0x22, 0x46, 0x26, 0xF6, 0x69, 0x4E, 0xAC, 0x83, 0x2F, 0x2D, 0x04, 0x76, 0x82, 0x7D
	, 0x80, 0x60, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xC0, 0x13, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
	, 0xCC, 0xA0, 0xC9, 0x1E, 0x53, 0xF2, 0x2C, 0x45, 0xA3, 0x79, 0x13, 0x1C, 0x72, 0x07, 0xF8, 0xDA
	, 0x80, 0xC0, 0x13, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x40, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
	, 0xBD, 0x97, 0x48, 0xAB, 0x81, 0x35, 0x21, 0x4D, 0xB8, 0xD0, 0x88, 0xE3, 0x62, 0xA7, 0x88, 0x2A
	, 0x80, 0x40, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xE0, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

struct CGptDiskOffsetLengthName
{
	LONGLONG m_llOffset;
	LONGLONG m_llLength;
	LPCTSTR m_pszName;

	static INT Get(CONST BYTE * pBufferStart, BYTE* pUserBuffer, LONGLONG llUserBufferLength, CONST CGptDiskOffsetLengthName & OffsetLengthName);
	static INT Set(BYTE * pBufferStart, CONST BYTE* pUserBuffer, LONGLONG llUserBufferLength, CONST CGptDiskOffsetLengthName & OffsetLengthName);
};


static CONST CGptDiskOffsetLengthName GPT_MBR_LAYOUT[] = 
{
	//0x01BE
	//1 byte
	//00 //00
	//Boot Indicator. Must be set to 00 to indicate that this partition cannot be booted.
	{0x01BE,	1, TEXT("Boot Indicator. Must be set to 00 to indicate that this partition cannot be booted")},

	//0x01BF
	//1 byte
	//00 //01
	//Starting Head. Matches the Starting LBA of the single partition. 
	{0x01BF,	1, TEXT("Starting Head. Matches the Starting LBA of the single partition")}, 

	//0x01C0
	//1 byte
	//02 //02
	//Starting Sector. Matches the Starting LBA of the single partition. 
	{0x01C0,	1, TEXT("Starting Sector. Matches the Starting LBA of the single partition")}, 

	//0x01C1
	//1 byte
	//00 //03
	//Starting Cylinder. Matches the Starting LBA of the GPT partition. 
	{0x01C1,	1, TEXT("Starting Cylinder. Matches the Starting LBA of the GPT partition")},

	//0x01C2
	//1 byte
	//EE //04
	//System ID. Must be EE to specify that the single partition is a GPT partition. If you move a GPT disk to a computer running Windows 2000 with Service Pack 1 or greater or Windows Server 2003, the partition is displayed as a GPT Protective Partition and cannot be deleted. 
	{0x01C2,	1, TEXT("System ID. Must be EE to specify that the single partition is a GPT partition. If you move a GPT disk to a computer running Windows 2000 with Service Pack 1 or greater or Windows Server 2003, the partition is displayed as a GPT Protective Partition and cannot be deleted. ")},

	//0x01C3
	//1 byte
	//FF //05
	//Ending Head. Matches the Ending LBA of the single partition. If the Ending LBA is too large to be represented here, this field is set to FF.
	{0x01C3,	1, TEXT("Ending Head. Matches the Ending LBA of the single partition. If the Ending LBA is too large to be represented here, this field is set to FF.")},

	//0x01C4
	//1 byte
	//FF //06
	//Ending Sector. Matches the Ending LBA of the single partition. If the Ending LBA is too large to be represented here, this field is set to FF.
	{0x01C4,	1, TEXT("Ending Sector. Matches the Ending LBA of the single partition. If the Ending LBA is too large to be represented here, this field is set to FF.")},

	//0x01C5
	//1 byte
	//FF //07
	//EndingCylinder. Matches the Ending LBA of the single partition. If the Ending LBA is too large to be represented here, this field is set to FF.
	{0x01C5,	1, TEXT("Ending Cylinder. Matches the Ending LBA of the single partition. If the Ending LBA is too large to be represented here, this field is set to FF.")},

	//0x01C6
	//4 bytes
	//01 00 00 00  //08
	//StartingLBA. Always set to 1. The Starting LBA begins at the GPT partition table header, which is located at LBA 1.
	{0x01C6,	4, TEXT("Starting LBA. Always set to 1. The Starting LBA begins at the GPT partition table header, which is located at LBA 1.")},

	//0x01CA
	//4 bytes
	//FF FF FF FF //09
	//Size in LBA. The size of the single partition. Must be set to FF FF FF FF if this value is too large to be represented here.
	{0x01CA,	4, TEXT("Size in LBA. The size of the single partition. Must be set to FF FF FF FF if this value is too large to be represented here.")},
};

static CONST CGptDiskOffsetLengthName GPT_HEADER_LAYOUT[] = 
{
	//0x00
	//8 bytes
	//45 46 49 20 50 41 52 54  //00
	//Signature. Used to identify all EFI-compatible GPT headers. The value must always be 45 46 49 20 50 41 52 54.
	{0x00, 8, TEXT("Signature. Used to identify all EFI-compatible GPT headers. The value must always be 45 46 49 20 50 41 52 54.")},

	//0x08
	//4 bytes
	//00 00 01 00 //01
	//Revision. The revision number of the EFI specification to which the GPT header complies. For version 1.0, the value is 00 00 01 00.
	{0x08, 4, TEXT("Revision. The revision number of the EFI specification to which the GPT header complies. For version 1.0, the value is 00 00 01 00.")},

	//0x0C
	//4 bytes
	//5C 00 00 00 //02
	//Header Size. The size, in bytes, of the GPT header. The size is always 5C 00 00 00 or 92 bytes. The remaining bytes in LBA 1 are reserved.
	{0x0C, 4, TEXT("Header Size. The size, in bytes, of the GPT header. The size is always 5C 00 00 00 or 92 bytes. The remaining bytes in LBA 1 are reserved.")},

	//0x10
	//4 bytes
	//27 6D 9F C9 //03
	//CRC32 Checksum. Used to verify the integrity of the GPT header. The 32-bit cyclic redundancy check (CRC) algorithm is used to perform this calculation.
	{0x10, 4, TEXT("CRC32 Checksum. Used to verify the integrity of the GPT header. The 32-bit cyclic redundancy check (CRC) algorithm is used to perform this calculation.")},

	//0x14
	//4 bytes
	//00 00 00 00 //04
	//Reserved. Must be 0.
	{0x14, 4, TEXT("Reserved. Must be 0.")},

	//0x18
	//8 bytes
	//01 00 00 00 00 00 00 00 //05
	//Primary LBA. The LBA that contains the primary GPT header. The value is always equal to LBA 1.
	{0x18, 8, TEXT("Primary LBA. The LBA that contains the primary GPT header. The value is always equal to LBA 1.")},

	//0x20
	//8 bytes
	//37 C8 11 01 00 00 00 00 //06
	//Backup LBA. The LBA address of the backup GPT header. This value is always equal to the last LBA on the disk.
	{0x20, 8, TEXT("Backup LBA. The LBA address of the backup GPT header. This value is always equal to the last LBA on the disk.")},

	//0x28
	//8 bytes
	//22 00 00 00 00 00 00 00 //07
	//First Usable LBA. The first usable LBA that can be contained in a GUID partition entry. In other words, the first partition begins at this LBA. In the 64-bit versions of Windows Server 2003, this number is always LBA 34.
	{0x28, 8, TEXT("First Usable LBA. The first usable LBA that can be contained in a GUID partition entry. In other words, the first partition begins at this LBA. In the 64-bit versions of Windows Server 2003, this number is always LBA 34.")},

	//0x30
	//8 bytes
	//17 C8 11 01 00 00 00 00 //08
	//Last Usable LBA. The last usable LBA that can be contained in a GUID partition entry.
	{0x30, 8, TEXT("Last Usable LBA. The last usable LBA that can be contained in a GUID partition entry.")},

	//0x38
	//16 bytes
	//00 A2 DA 98 9F 79 C0 01 A1 F4 04 62 2F D5 EC 6D //09
	//Disk GUID. A unique number that identifies the partition table header and the disk itself.
	{0x38, 16, TEXT("Disk GUID. A unique number that identifies the partition table header and the disk itself.")},

	//0x48
	//8 bytes
	//02 00 00 00 00 00 00 00 //10
	//Partition Entry LBA. The starting LBA of the GUID partition entry array. This number is always LBA 2.
	{0x48, 8, TEXT("Partition Entry LBA. The starting LBA of the GUID partition entry array. This number is always LBA 2.")},

	//0x50
	//4 bytes
	//80 00 00 00 //11
	//Number of Partition Entries. The maximum number of partition entries that can be contained in the GUID partition entry array. In the 64-bit versions of Windows Server 2003, this number is equal to 128.
	{0x50, 4, TEXT("Number of Partition Entries. The maximum number of partition entries that can be contained in the GUID partition entry array. In the 64-bit versions of Windows Server 2003, this number is equal to 128.")},

	//0x54
	//4 bytes
	//80 00 00 00 //12
	//Size of Partition Entry. The size, in bytes, of each partition entry in the GUID partition entry array. Each partition entry is 128 bytes.
	{0x54, 4, TEXT("Size of Partition Entry. The size, in bytes, of each partition entry in the GUID partition entry array. Each partition entry is 128 bytes.")},

	//0x58
	//4 bytes
	//27 C3 F3 85 //13
	//Partition Entry Array CRC32. Used to verify the integrity of the GUID partition entry array. The 32-bit CRC algorithm is used to perform this calculation.
	{0x58, 4, TEXT("Partition Entry Array CRC32. Used to verify the integrity of the GUID partition entry array. The 32-bit CRC algorithm is used to perform this calculation.")},

	//0x5C
	//420 bytes

	//Reserved. Must be 0. //14
	{0x5C, 420, TEXT("Reserved. Must be 0.")},
};


struct CGptDiskPartitionType
{
	LPCTSTR m_pszName;
	LPCTSTR m_pszTypeGuid;
};

static CGptDiskPartitionType GptPartitionType[] = 
{
	{TEXT("{00000000-0000-0000-0000-000000000000}"), TEXT("Unused entry") },

	{TEXT("{28732AC1-1FF8-D211-BA4B-00A0C93EC93B}"),  TEXT("EFI System partition") },

	{TEXT("{16E3C9E3-5C0B-B84D-817D-F92DF00215AE}"),  TEXT("Microsoft Reserved partition") },

	{TEXT("{EBD0A0A2-B9E5-4433-87C0-68B6B72699C7}"),  TEXT("Basic data partition by SMART") },

	{TEXT("{A2A0D0EB-E5B9-3344-87C0-68B6B72699C7}"),  TEXT("Primary partition on a basic disk") },

	{TEXT("{AAC80858-8F7E-E042-85D2-E1E90434CFB3}"),  TEXT("LDM Metadata partition on a dynamic disk") },

	{TEXT("{A0609BAF-3114-624F-BC68-3311714A69AD}"), TEXT("LDM Data partition on a dynamic disk")  },
};


static CONST CGptDiskOffsetLengthName GPT_PARTITION_TABLE_ENTRY_LAYOUT[] = 
{
	//0x00
	//16 bytes //00
	//28 73 2A C1 1F F8 D2 11 BA 4B 00 A0 C9 3E C9 3B
	//Partition Type GUID. Identifies the type of partition. The partition type GUID in this example identifies Microsoft Reserved partitions. For a description of partition type GUIDs, see the table titled Partition Type GUIDs earlier in this section.
	{0x00, 16, TEXT("Partition Type GUID. Identifies the type of partition. The partition type GUID in this example identifies Microsoft Reserved partitions. For a description of partition type GUIDs, see the table titled Partition Type GUIDs earlier in this section.")},

	//0x10
	//16 bytes //01
	//C0 94 77 FC 43 86 C0 01 92 E0 3C 77 2E 43 AC 40
	//Unique Partition GUID. A unique ID created for each partition entry. 
	{0x10, 16, TEXT("Unique Partition GUID. A unique ID created for each partition entry")},

	//0x20
	//8 bytes //02
	//3F 00 00 00 00 00 00 00
	//Starting LBA. The starting LBA of the partition that is defined by this partition entry.
	{0x20, 8, TEXT("Starting LBA. The starting LBA of the partition that is defined by this partition entry.")},

	//0x28
	//8 bytes //03
	//CC 2F 03 00 00 00 00 00
	//Ending LBA. The ending LBA of the partition that is defined by this partition entry. 
	{0x28, 8, TEXT("Ending LBA. The ending LBA of the partition that is defined by this partition entry. ")},

	//0x30
	//8 bytes //04
	//00 00 00 00 00 00 00 00
	//Attribute Bits. Describe how the partition is used. For a description of the attribute used by the 64-bit versions of Windows Server 2003, see the table titled ¡°GUID Partition Entry Attributes Used by the 64-Bit Editions of Windows on Itanium-based Computers¡± later in this section.
	{0x30, 8, TEXT("Attribute Bits. Describe how the partition is used. For a description of the attribute used by the 64-bit versions of Windows Server 2003, see the table titled ¡°GUID Partition Entry Attributes Used by the 64-Bit Editions of Windows on Itanium-based Computers¡± later in this section.")},

	//0x38
	//72 bytes //05
	//Partition Name
	//Partition Name. A 36-character Unicode string that can be used to name the partition.
	{0x38, 72, TEXT("Partition Name. A 36-character Unicode string that can be used to name the partition.")},
};


struct CGptMbrLayout
{
public:
	BYTE * m_pGptMbr;
	CHeapPtr<BYTE> m_apBuffer;

public:
	CGptMbrLayout();

	VOID InitializeFromSample();

	BYTE GetBootIndicator();
	VOID SetBootIndicator(BYTE BootIndicator);

	BYTE GetStartingHead();
	VOID SetStartingHead(BYTE StartingHead);

	BYTE GetStartingSector();
	VOID SetStartingSector(BYTE StartingSector);

	BYTE GetStartingCylinde();
	VOID SetStartingCylinde(BYTE StartingCylinde);

	BYTE GetSystemID();
	VOID SetSystemID(BYTE SystemID);

	BYTE GetEndingHead();
	VOID SetEndingHead(BYTE EndingHead);

	BYTE GetEndingSector();
	VOID SetEndingSector(BYTE EndingSector);

	BYTE GetEndingCylinder();
	VOID SetEndingCylinder(BYTE EndingCylinder);

	ULONG GetStartingLBA();
	VOID SetStartingLBA(ULONG StartingLBA);

	ULONG GetSizeInLBA();
	VOID SetSizeInLBA( ULONG SizeInLBA );
};


struct CGptHeaderLayout
{
public:
	BYTE * m_pGptHeader;
	CHeapPtr<BYTE> m_apBuffer;

public:
	CGptHeaderLayout();

	VOID InitializeFromSample();

	VOID SetSignature(CONST BYTE* Signature, INT nLen = 8);
	VOID GetSignature(BYTE* Signature, INT nLen = 8);

	VOID SetRevision(ULONG Revision);
	VOID GetRevision(ULONG & Revision);

	VOID SetHeaderSize(ULONG HeaderSize);
	VOID GetHeaderSize(ULONG & HeaderSize);

	VOID UpdateGptHeaderCrc();
	VOID GetGptHeaderCrc(ULONG & GptHeaderCrc);

	VOID SetReserved(ULONG Reserved);
	VOID GetReserved(ULONG & Reserved);

	VOID SetPrimaryLBA(LONGLONG PrimaryLBA);
	VOID GetPrimaryLBA(LONGLONG & PrimaryLBA);

	VOID SetBackupLBA(LONGLONG BackupLBA);
	VOID GetBackupLBA(LONGLONG & BackupLBA);

	VOID SetFirstUsableLBA(LONGLONG FirstUsableLBA);
	VOID GetFirstUsableLBA(LONGLONG & FirstUsableLBA);

	VOID SetLastUsableLBA(LONGLONG LastUsableLBA);
	VOID GetLastUsableLBA(LONGLONG & LastUsableLBA);

	VOID SetDiskGUID(CONST GUID & DiskGUID);
	VOID GetDiskGUID(GUID & DiskGUID);

	VOID SetPartitionEntryLBA(LONGLONG PartitionEntryLBA);
	VOID GetPartitionEntryLBA(LONGLONG & PartitionEntryLBA);

	VOID SetNumberOfPartitionEntries(ULONG NumberOfPartitionEntries);
	VOID GetNumberOfPartitionEntries(ULONG & NumberOfPartitionEntries);

	VOID SetSizeOfPartitionEntry(ULONG SizeOfPartitionEntry);
	VOID GetSizeOfPartitionEntry(ULONG & SizeOfPartitionEntry);

	VOID SetPartitionEntryArrayCrc32(ULONG PartitionEntryArrayCrc32);
	VOID GetPartitionEntryArrayCrc32(ULONG & PartitionEntryArrayCrc32);
};


class CGptPartitionTableEntriesLayout
{
public:
	BYTE * m_pGptPartitionTableEntries;
	CHeapPtr<BYTE> m_apBuffer;

public:
	CGptPartitionTableEntriesLayout();

	VOID InitializeFromSample();

	VOID SetPartitionTypeGUID(INT nPartIndex, CONST GUID & PartitionTypeGUID);
	VOID GetPartitionTypeGUID(INT nPartIndex, GUID & PartitionTypeGUID);

	VOID SetUniquePartitionGUID(INT nPartIndex, CONST GUID & UniquePartitionGUID);
	VOID GetUniquePartitionGUID(INT nPartIndex, GUID & UniquePartitionGUID);

	VOID SetStartingLBA(INT nPartIndex, CONST LONGLONG & StartingLBA);
	VOID GetStartingLBA(INT nPartIndex, LONGLONG & StartingLBA);

	VOID SetEndingLBA(INT nPartIndex, CONST LONGLONG & EndingLBA);
	VOID GetEndingLBA(INT nPartIndex, LONGLONG & EndingLBA);

	VOID SetAttributeBits(INT nPartIndex, CONST LONGLONG & AttributeBits);
	VOID GetAttributeBits(INT nPartIndex, LONGLONG & AttributeBits);

	VOID SetPartitionName(INT nPartIndex, LPCTSTR PartitionName, INT nLength = 36);
	VOID GetPartitionName(INT nPartIndex, LPTSTR PartitionName, INT nLength = 36);

	ULONG CalcCrc();
};

class CGptDiskPartition
{
private:
	LONGLONG m_llDiskSize; //in
	GUID m_UniquePartitionGUID; //out
	GUID m_DiskGUID; //out
	LONGLONG m_llDiskStartLba; //out
	LONGLONG m_llDiskEndLba; //out
	LONGLONG m_llPartitionStartLba; //out
	LONGLONG m_llPartitionEndLba; //out
	IFileDeviceObject * m_pIFileDevice; //external object, in

	//******************************************
	static CONST LONGLONG START_RESERVED_SPACE = 16*1024*1024;
	static CONST LONGLONG START_USABLE_RESERVED_SPACE = 8*1024*1024;
	static CONST LONGLONG END_RESERVED_SPACE = 16*1024*1024;
	static CONST LONGLONG END_USABLE_RESERVED_SPACE = 8*1024*1024;


public:
	CGptDiskPartition(LONGLONG llDiskSize, IFileDeviceObject * pIFileDevice);
	INT Partition(BOOL bWriteSecondary);
	INT GetPartitionInfo(
		GUID & UniquePartitionGUID,
		GUID & DiskGUID,
		LONGLONG & llDiskStartLba,
		LONGLONG & llDiskEndLba,
		LONGLONG & llPartitionStartLba,
		LONGLONG & llPartitionEndLba
		);
};


//static CONST BYTE GPT_MBR_SAMPLE[] = 
//{
//	0x33, 0xC0, 0x8E, 0xD0, 0xBC, 0x00, 0x7C, 0x8E, 0xC0, 0x8E, 0xD8, 0xBE, 0x00, 0x7C, 0xBF, 0x00
//	, 0x06, 0xB9, 0x00, 0x02, 0xFC, 0xF3, 0xA4, 0x50, 0x68, 0x1C, 0x06, 0xCB, 0xFB, 0xB9, 0x04, 0x00
//	, 0xBD, 0xBE, 0x07, 0x80, 0x7E, 0x00, 0x00, 0x7C, 0x0B, 0x0F, 0x85, 0x0E, 0x01, 0x83, 0xC5, 0x10
//	, 0xE2, 0xF1, 0xCD, 0x18, 0x88, 0x56, 0x00, 0x55, 0xC6, 0x46, 0x11, 0x05, 0xC6, 0x46, 0x10, 0x00
//	, 0xB4, 0x41, 0xBB, 0xAA, 0x55, 0xCD, 0x13, 0x5D, 0x72, 0x0F, 0x81, 0xFB, 0x55, 0xAA, 0x75, 0x09
//	, 0xF7, 0xC1, 0x01, 0x00, 0x74, 0x03, 0xFE, 0x46, 0x10, 0x66, 0x60, 0x80, 0x7E, 0x10, 0x00, 0x74
//	, 0x26, 0x66, 0x68, 0x00, 0x00, 0x00, 0x00, 0x66, 0xFF, 0x76, 0x08, 0x68, 0x00, 0x00, 0x68, 0x00
//	, 0x7C, 0x68, 0x01, 0x00, 0x68, 0x10, 0x00, 0xB4, 0x42, 0x8A, 0x56, 0x00, 0x8B, 0xF4, 0xCD, 0x13
//	, 0x9F, 0x83, 0xC4, 0x10, 0x9E, 0xEB, 0x14, 0xB8, 0x01, 0x02, 0xBB, 0x00, 0x7C, 0x8A, 0x56, 0x00
//	, 0x8A, 0x76, 0x01, 0x8A, 0x4E, 0x02, 0x8A, 0x6E, 0x03, 0xCD, 0x13, 0x66, 0x61, 0x73, 0x1C, 0xFE
//	, 0x4E, 0x11, 0x75, 0x0C, 0x80, 0x7E, 0x00, 0x80, 0x0F, 0x84, 0x8A, 0x00, 0xB2, 0x80, 0xEB, 0x84
//	, 0x55, 0x32, 0xE4, 0x8A, 0x56, 0x00, 0xCD, 0x13, 0x5D, 0xEB, 0x9E, 0x81, 0x3E, 0xFE, 0x7D, 0x55
//	, 0xAA, 0x75, 0x6E, 0xFF, 0x76, 0x00, 0xE8, 0x8D, 0x00, 0x75, 0x17, 0xFA, 0xB0, 0xD1, 0xE6, 0x64
//	, 0xE8, 0x83, 0x00, 0xB0, 0xDF, 0xE6, 0x60, 0xE8, 0x7C, 0x00, 0xB0, 0xFF, 0xE6, 0x64, 0xE8, 0x75
//	, 0x00, 0xFB, 0xB8, 0x00, 0xBB, 0xCD, 0x1A, 0x66, 0x23, 0xC0, 0x75, 0x3B, 0x66, 0x81, 0xFB, 0x54
//	, 0x43, 0x50, 0x41, 0x75, 0x32, 0x81, 0xF9, 0x02, 0x01, 0x72, 0x2C, 0x66, 0x68, 0x07, 0xBB, 0x00
//	, 0x00, 0x66, 0x68, 0x00, 0x02, 0x00, 0x00, 0x66, 0x68, 0x08, 0x00, 0x00, 0x00, 0x66, 0x53, 0x66
//	, 0x53, 0x66, 0x55, 0x66, 0x68, 0x00, 0x00, 0x00, 0x00, 0x66, 0x68, 0x00, 0x7C, 0x00, 0x00, 0x66
//	, 0x61, 0x68, 0x00, 0x00, 0x07, 0xCD, 0x1A, 0x5A, 0x32, 0xF6, 0xEA, 0x00, 0x7C, 0x00, 0x00, 0xCD
//	, 0x18, 0xA0, 0xB7, 0x07, 0xEB, 0x08, 0xA0, 0xB6, 0x07, 0xEB, 0x03, 0xA0, 0xB5, 0x07, 0x32, 0xE4
//	, 0x05, 0x00, 0x07, 0x8B, 0xF0, 0xAC, 0x3C, 0x00, 0x74, 0x09, 0xBB, 0x07, 0x00, 0xB4, 0x0E, 0xCD
//	, 0x10, 0xEB, 0xF2, 0xF4, 0xEB, 0xFD, 0x2B, 0xC9, 0xE4, 0x64, 0xEB, 0x00, 0x24, 0x02, 0xE0, 0xF8
//	, 0x24, 0x02, 0xC3, 0x49, 0x6E, 0x76, 0x61, 0x6C, 0x69, 0x64, 0x20, 0x70, 0x61, 0x72, 0x74, 0x69
//	, 0x74, 0x69, 0x6F, 0x6E, 0x20, 0x74, 0x61, 0x62, 0x6C, 0x65, 0x00, 0x45, 0x72, 0x72, 0x6F, 0x72
//	, 0x20, 0x6C, 0x6F, 0x61, 0x64, 0x69, 0x6E, 0x67, 0x20, 0x6F, 0x70, 0x65, 0x72, 0x61, 0x74, 0x69
//	, 0x6E, 0x67, 0x20, 0x73, 0x79, 0x73, 0x74, 0x65, 0x6D, 0x00, 0x4D, 0x69, 0x73, 0x73, 0x69, 0x6E
//	, 0x67, 0x20, 0x6F, 0x70, 0x65, 0x72, 0x61, 0x74, 0x69, 0x6E, 0x67, 0x20, 0x73, 0x79, 0x73, 0x74
//	, 0x65, 0x6D, 0x00, 0x00, 0x00, 0x63, 0x7B, 0x9A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x02, 0x00, 0xEE, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0xAA
//};
//
//static CONST BYTE GPT_HEADER_SAMPLE[] = 
//{
//	0x45, 0x46, 0x49, 0x20, 0x50, 0x41, 0x52, 0x54, 0x00, 0x00, 0x01, 0x00, 0x5C, 0x00, 0x00, 0x00
//	, 0xCF, 0x2A, 0x70, 0x9E, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0xFF, 0xFF, 0x31, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0xDE, 0xFF, 0x31, 0x00, 0x00, 0x00, 0x00, 0x00, 0x17, 0x9A, 0x1D, 0x52, 0xE8, 0x1D, 0xB0, 0x42
//	, 0xA0, 0x54, 0xA7, 0x40, 0xB7, 0xA1, 0x1B, 0x4C, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x4E, 0x9E, 0x5D, 0x73, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//};
//
//static CONST BYTE GPT_PARTITION_TABLE_ENTRY_SAMPLE[] = 
//{
//	0x16, 0xE3, 0xC9, 0xE3, 0x5C, 0x0B, 0xB8, 0x4D, 0x81, 0x7D, 0xF9, 0x2D, 0xF0, 0x02, 0x15, 0xAE
//	, 0x22, 0x29, 0xDC, 0x19, 0x7B, 0xFE, 0x4A, 0x4E, 0xA2, 0x2F, 0xF7, 0x9A, 0x81, 0x8C, 0xB6, 0x14
//	, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x21, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4D, 0x00, 0x69, 0x00, 0x63, 0x00, 0x72, 0x00
//	, 0x6F, 0x00, 0x73, 0x00, 0x6F, 0x00, 0x66, 0x00, 0x74, 0x00, 0x20, 0x00, 0x72, 0x00, 0x65, 0x00
//	, 0x73, 0x00, 0x65, 0x00, 0x72, 0x00, 0x76, 0x00, 0x65, 0x00, 0x64, 0x00, 0x20, 0x00, 0x70, 0x00
//	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
//	, 0x2A, 0x79, 0x5B, 0xEE, 0x28, 0x4C, 0x82, 0x40, 0xAE, 0xC5, 0xE9, 0x48, 0x42, 0x4E, 0xB8, 0x7E
//	, 0x80, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x20, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
//	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
//	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
//	, 0xE5, 0xE2, 0x0D, 0x41, 0x7A, 0x88, 0x75, 0x4E, 0x96, 0x1A, 0xFB, 0xD0, 0x21, 0x0F, 0xD3, 0xE6
//	, 0x80, 0x20, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x60, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
//	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
//	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
//	, 0x8E, 0xDE, 0x22, 0x46, 0x26, 0xF6, 0x69, 0x4E, 0xAC, 0x83, 0x2F, 0x2D, 0x04, 0x76, 0x82, 0x7D
//	, 0x80, 0x60, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xC0, 0x13, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
//	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
//	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
//	, 0xCC, 0xA0, 0xC9, 0x1E, 0x53, 0xF2, 0x2C, 0x45, 0xA3, 0x79, 0x13, 0x1C, 0x72, 0x07, 0xF8, 0xDA
//	, 0x80, 0xC0, 0x13, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x40, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
//	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
//	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0xA2, 0xA0, 0xD0, 0xEB, 0xE5, 0xB9, 0x33, 0x44, 0x87, 0xC0, 0x68, 0xB6, 0xB7, 0x26, 0x99, 0xC7
//	, 0xBD, 0x97, 0x48, 0xAB, 0x81, 0x35, 0x21, 0x4D, 0xB8, 0xD0, 0x88, 0xE3, 0x62, 0xA7, 0x88, 0x2A
//	, 0x80, 0x40, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xE0, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x61, 0x00, 0x73, 0x00, 0x69, 0x00
//	, 0x63, 0x00, 0x20, 0x00, 0x64, 0x00, 0x61, 0x00, 0x74, 0x00, 0x61, 0x00, 0x20, 0x00, 0x70, 0x00
//	, 0x61, 0x00, 0x72, 0x00, 0x74, 0x00, 0x69, 0x00, 0x74, 0x00, 0x69, 0x00, 0x6F, 0x00, 0x6E, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//	, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
//};
